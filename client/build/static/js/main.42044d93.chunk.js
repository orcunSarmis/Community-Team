(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{80:function(e,t,n){"use strict";n.r(t);var a,c,r,s=n(1),i=n.n(s),o=n(60),l=n.n(o),j=n(8),b=n(23),d=n(5),u=n(67),m=n(91),O=n(93),h=n(90),p=n(64),x=n(66),g=n(3),f=function(){return Object(g.jsx)("main",{children:Object(g.jsx)("div",{className:"flex-row justify-center",children:"homepage"})})},v=n(95),k=n(38),w=n(92),y=Object(w.a)(a||(a=Object(k.a)(["\nquery Me {\n  me {\n    _id\n    username\n    email\n  }\n}\n"]))),S=function(){var e=Object(v.a)(y),t=e.loading,n=e.data;if(t)return Object(g.jsx)(g.Fragment,{children:"Loading..."});var a=(null===n||void 0===n?void 0:n.me)||{};return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("p",{children:"Profile Page"}),"Id: ",a._id,Object(g.jsx)("br",{}),"Email: ",a.email,Object(g.jsx)("br",{}),"Username: ",a.username]})},N=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{children:"Page not found"})})},I=n(33),L=n(44),$=n(15),_=n(11),C=n(88),F=Object(w.a)(c||(c=Object(k.a)(["\nmutation AddUser($username: String!, $email: String!, $password: String!) {\n  addUser(username: $username, email: $email, password: $password) {\n    token\n    user {\n      _id\n      username\n      email\n    }\n  }\n}"]))),P=Object(w.a)(r||(r=Object(k.a)(["\nmutation Login($email: String!, $password: String!) {\n  login(email: $email, password: $password) {\n    token\n    user {\n      _id\n      username\n      email\n    }\n  }\n}"]))),T=n(61),U=n(62),Y=n(53),D=new(function(){function e(){Object(T.a)(this,e)}return Object(U.a)(e,[{key:"getProfile",value:function(){return Object(Y.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(Y.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),E=function(e){var t=Object(s.useState)({email:"",password:""}),n=Object(_.a)(t,2),a=n[0],c=n[1],r=Object(C.a)(P),i=Object(_.a)(r,2),o=i[0],l=i[1],d=l.error,u=l.data,m=function(e){var t=e.target,n=t.name,r=t.value;c(Object(j.a)(Object(j.a)({},a),{},Object($.a)({},n,r)))},O=function(){var e=Object(L.a)(Object(I.a)().mark((function e(t){var n,r;return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(a),e.prev=2,e.next=5,o({variables:Object(j.a)({},a)});case 5:n=e.sent,r=n.data,D.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(g.jsx)("div",{className:"col-12 col-lg-10",children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Login"}),Object(g.jsxs)("div",{className:"card-body",children:[u?Object(g.jsxs)("p",{children:["Success! You may now head"," ",Object(g.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(g.jsxs)("form",{onSubmit:O,children:[Object(g.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:a.email,onChange:m}),Object(g.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:a.password,onChange:m}),Object(g.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),d&&Object(g.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:d.message})]})]})})})},q=function(){var e=Object(s.useState)({username:"",email:"",password:""}),t=Object(_.a)(e,2),n=t[0],a=t[1],c=Object(C.a)(F),r=Object(_.a)(c,2),i=r[0],o=r[1],l=o.error,d=o.data,u=function(e){var t=e.target,c=t.name,r=t.value;a(Object(j.a)(Object(j.a)({},n),{},Object($.a)({},c,r)))},m=function(){var e=Object(L.a)(Object(I.a)().mark((function e(t){var a,c;return Object(I.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(n),e.prev=2,e.next=5,i({variables:Object(j.a)({},n)});case 5:a=e.sent,c=a.data,D.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("main",{className:"flex-row justify-center mb-4",children:Object(g.jsx)("div",{className:"col-12 col-lg-10",children:Object(g.jsxs)("div",{className:"card",children:[Object(g.jsx)("h4",{className:"card-header bg-dark text-light p-2",children:"Sign Up"}),Object(g.jsxs)("div",{className:"card-body",children:[d?Object(g.jsxs)("p",{children:["Success! You may now head"," ",Object(g.jsx)(b.b,{to:"/",children:"back to the homepage."})]}):Object(g.jsxs)("form",{onSubmit:m,children:[Object(g.jsx)("input",{className:"form-input",placeholder:"Your username",name:"username",type:"text",value:n.name,onChange:u}),Object(g.jsx)("input",{className:"form-input",placeholder:"Your email",name:"email",type:"email",value:n.email,onChange:u}),Object(g.jsx)("input",{className:"form-input",placeholder:"******",name:"password",type:"password",value:n.password,onChange:u}),Object(g.jsx)("button",{className:"btn btn-block btn-primary",style:{cursor:"pointer"},type:"submit",children:"Submit"})]}),l&&Object(g.jsx)("div",{className:"my-3 p-3 bg-danger text-white",children:l.message})]})]})})})},B=n(19),J=function(){return Object(g.jsxs)(B.a,{children:[Object(g.jsx)(B.a.Item,{children:Object(g.jsx)(B.a.Link,{as:b.b,to:"/",children:"Home"})}),Object(g.jsx)(B.a.Item,{children:Object(g.jsx)(B.a.Link,{as:b.b,to:"/profile",children:"Profile"})}),D.loggedIn()?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(B.a.Item,{children:Object(g.jsx)(B.a.Link,{onClick:function(e){e.preventDefault(),D.logout()},children:"Logout"})})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(B.a.Item,{children:Object(g.jsx)(B.a.Link,{as:b.b,to:"/login",children:"Login"})}),Object(g.jsx)(B.a.Item,{children:Object(g.jsx)(B.a.Link,{as:b.b,to:"/signup",children:"Signup"})})]})]})},M=Object(u.a)({uri:"/graphql"}),z=Object(p.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(j.a)(Object(j.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),A=new m.a({link:z.concat(M),cache:new O.a});var H=function(){return Object(g.jsx)(h.a,{client:A,children:Object(g.jsxs)(b.a,{children:[Object(g.jsx)(J,{}),Object(g.jsx)(x.a,{children:Object(g.jsxs)(d.c,{children:[Object(g.jsx)(d.a,{path:"/",element:Object(g.jsx)(f,{})}),Object(g.jsx)(d.a,{path:"/profile",element:Object(g.jsx)(S,{})}),Object(g.jsx)(d.a,{path:"/login",element:Object(g.jsx)(E,{})}),Object(g.jsx)(d.a,{path:"/signup",element:Object(g.jsx)(q,{})}),Object(g.jsx)(d.a,{path:"*",element:Object(g.jsx)(N,{})})]})})]})})};n(79);l.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(H,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.42044d93.chunk.js.map